<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Firebase ì—°ê²° ìµœì¢… í…ŒìŠ¤íŠ¸</title>
    <style> body { font-family: sans-serif; padding: 20px; } </style>
</head>
<body>
    <h1>Firebase ì—°ê²° ìµœì¢… í…ŒìŠ¤íŠ¸</h1>
    <p>í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ ì•„ë˜ì— í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
    <div id="results"></div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <script>
        const resultsDiv = document.getElementById('results');
        
        // --- 1. Firebase ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ í™•ì¸ ---
        if (typeof firebase !== 'undefined') {
            resultsDiv.innerHTML += '<p style="color: green;">âœ… Step 1: Firebase ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì„±ê³µ!</p>';
        } else {
            resultsDiv.innerHTML += '<p style="color: red;">âŒ Step 1: Firebase ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì‹¤íŒ¨! ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>';
        }

        const firebaseConfig = {
            apiKey: "AIzaSyBDYkDY4UxRP2182lKvHbqE6kZ1uJcHspg",
            authDomain: "clover-game.firebaseapp.com",
            projectId: "clover-game",
            storageBucket: "clover-game.appspot.com",
            messagingSenderId: "596891629209",
            appId: "1:596891629209:web:27b9c386df467d845aaa08"
        };

        let db;
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            resultsDiv.innerHTML += '<p style="color: green;">âœ… Step 2: Firebase ì´ˆê¸°í™” ì„±ê³µ! (firebaseConfig í‚¤ê°€ ìœ íš¨í•©ë‹ˆë‹¤)</p>';
        } catch (e) {
            resultsDiv.innerHTML += `<p style="color: red;">âŒ Step 2: Firebase ì´ˆê¸°í™” ì‹¤íŒ¨! firebaseConfigë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”. ì˜¤ë¥˜: ${e.message}</p>`;
        }

        async function testDatabaseConnection() {
            if (!db) {
                resultsDiv.innerHTML += '<p style="color: red;">âŒ Step 3: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨! (ì´ˆê¸°í™” ì‹¤íŒ¨)</p>';
                return;
            }
            const testCollection = db.collection('test-connection');
            try {
                // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì“°ê¸° ì‹œë„
                await testCollection.doc('test-doc').set({ timestamp: new Date() });
                resultsDiv.innerHTML += '<p style="color: green;">âœ… Step 3: Firestore ë°ì´í„°ë² ì´ìŠ¤ ì“°ê¸° ì„±ê³µ! (ë³´ì•ˆ ê·œì¹™ ì •ìƒ)</p>';
                
                // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì½ê¸° ì‹œë„
                const doc = await testCollection.doc('test-doc').get();
                if (doc.exists) {
                    resultsDiv.innerHTML += '<p style="color: green;">âœ… Step 4: Firestore ë°ì´í„°ë² ì´ìŠ¤ ì½ê¸° ì„±ê³µ! (ë³´ì•ˆ ê·œì¹™ ì •ìƒ)</p>';
                    resultsDiv.innerHTML += '<h2>ğŸ‰ ëª¨ë“  ì—°ê²°ì´ ì •ìƒì…ë‹ˆë‹¤!</h2>';
                } else {
                     resultsDiv.innerHTML += '<p style="color: red;">âŒ Step 4: Firestore ë°ì´í„°ë² ì´ìŠ¤ ì½ê¸° ì‹¤íŒ¨!</p>';
                }
            } catch (e) {
                resultsDiv.innerHTML += `<p style="color: red;">âŒ Step 3 ë˜ëŠ” 4: ë°ì´í„°ë² ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨! ë³´ì•ˆ ê·œì¹™ì„ í™•ì¸í•˜ì„¸ìš”. ì˜¤ë¥˜: ${e.message}</p>`;
            }
        }
        
        // í˜ì´ì§€ê°€ ë¡œë“œë˜ë©´ ë°”ë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        testDatabaseConnection();
    </script>
</body>
</html>
